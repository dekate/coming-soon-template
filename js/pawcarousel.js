!function(e){e.fn.pawCarousel=function(i){var t=e.extend({},{carouselItemCls:"paw-carousel-item",carouselNavItemCls:"paw-carousel-nav-item",activeCls:"active",carouselMediaCls:"paw-carousel-media",nextLinkCls:"paw-carousel-next",prevLinkCls:"paw-carousel-prev",loadingCls:"paw-loading",animSpeed:800,itemsClonedFromEdge:3,alignment:"center",imageCrop:!0},i);return this.each(function(){var i,a,n,s,o,l,d=e(this),c=t.carouselItemCls,r=t.carouselNavItemCls,f=t.activeCls,u="paw-carousel-item-orig",m="paw-make-start-clone",v="paw-make-end-clone",h="paw-slide-id",C=t.loadingCls,p=d.find("."+c),g=d.find("."+c+"."+f),w=d.next().find("."+r),x=d.children("."+t.carouselMediaCls),$=d.width(),T=(p.first().height(),0),k=d.find("."+t.nextLinkCls),I=d.find("."+t.prevLinkCls),A=t.animSpeed,W=t.itemsClonedFromEdge;p.slice(0,W).addClass(m),p.slice(-W).addClass(v),p.addClass(u);var N=d.find("."+u);function P(){g=d.find("."+c+"."+f),$carouselNavItemActive=d.next().find("."+r+"."+f)}function L(){if(d.find("."+c+"."+f).hasClass(v)){var e=N.clone();d.find("."+c).removeClass(v),e.removeClass(f+" "+u+" "+m),e.appendTo(x).promise().done(function(){D()}),d.find("."+c).slice(-3).addClass(v)}}function B(){if(d.find("."+c+"."+f).hasClass(m)){var e=N.clone();d.find("."+c).removeClass(m),e.removeClass(f+" "+u+" "+v),e.prependTo(x).promise().done(function(){D()}),d.find("."+c).slice(0,3).addClass(m)}}function D(){setTimeout(function(){T=0,d.find("."+c).each(function(){T+=e(this).outerWidth(!0)}),x.width(T).promise().done(function(){F(),M()})},1)}function E(e){$=d.width(),$carouselItemActiveWid=g.width(),"next"==e?s=g.next():"prev"==e&&(s=g.prev()),null!=e&&($goingToWid=s.width(),g.removeClass(f),s.addClass(f),o=$goingToWid/2),a=$/2,i=$carouselItemActiveWid/2}function F(e){"left"==t.alignment?(n=g.position().left,null!=e&&($goingToPos=s.position().left)):"right"==t.alignment?(n=g.position().left-$+$carouselItemActiveWid,null!=e&&($goingToPos=s.position().left-$+$goingToWid)):(n=g.position().left-a+i,null!=e&&($goingToPos=s.position().left-a+o))}function M(){P(),l=g.data(h),w.removeClass(f),w.each(function(){var i=e(this);if(i.data(h)==l)return i.addClass(f),!1})}function S(){D(),$=d.width(),d.find("."+c).css({"max-width":$}),p.find("img").css({"max-width":"100%"});var i=d.find("."+u);if(1==t.imageCrop){var a=1e4;i.each(function(){a=a<e(this).height()?a:e(this).height()})}else{a=-1;i.each(function(){a=a>e(this).height()?a:e(this).height()})}d.css({height:a}),P(),E(),F(),x.css({left:-n})}p.first().addClass(f),p.each(function(i){var t=i+1;e(this).attr("data-"+h,h+"-"+t)}),w.each(function(i){var t=i+1;e(this).attr("data-"+h,h+"-"+t)}),k.click(function(e){e.preventDefault(),P(),E("next"),L(),F("next"),x.animate({left:-$goingToPos},A),M()}),I.click(function(e){e.preventDefault(),P(),E("prev"),B(),F("prev"),x.css({left:-n}).animate({left:-$goingToPos},A),M()}),e(window).resize(function(){S()}),e(window).load(function(){S(),P(),E(),B(),w.click(function(){var i=e(this);if(P(),!i.hasClass(f)){var t=i.data(h);e(this).index()>$carouselNavItemActive.index()?(s=(s=g.nextUntil("[data-"+h+'="'+t+'"]').addBack().next()).last(),$carouselNavItemActive.removeClass(f),s.addClass(f)):((s=(s=g.prevUntil("[data-"+h+'="'+t+'"]').addBack().prev()).first()).data(h),$carouselNavItemActive.removeClass(f),s.addClass(f)),w.removeClass(f),i.addClass(f),E("anim"),B(),L(),F("anim"),x.css({left:-n}).animate({left:-$goingToPos},A)}}),setTimeout(function(){x.css({top:"0",left:-n})},3),d.find("."+C).fadeOut()})}),this}}(jQuery);